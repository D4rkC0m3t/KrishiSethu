<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Data Setup (No Auth Required)</title>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
        }
        button:hover {
            background: #0056b3;
        }
        button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        .success {
            color: #28a745;
            font-weight: bold;
        }
        .error {
            color: #dc3545;
            font-weight: bold;
        }
        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 15px;
            border-radius: 6px;
            margin: 20px 0;
        }
        pre {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
            font-size: 12px;
        }
        .step {
            margin: 20px 0;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üî• Simple Data Setup</h1>
        <p>This setup only requires Firestore (no authentication needed)</p>

        <div class="warning">
            <h3>‚ö†Ô∏è Required: Open Security Rules</h3>
            <p><strong>First, update your Firestore security rules to allow writes:</strong></p>
            <p>Go to <a href="https://console.firebase.google.com/project/krishisetu-88b88/firestore/rules" target="_blank">Firebase Console ‚Üí Firestore ‚Üí Rules</a></p>
            <pre>rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if true;
    }
  }
}</pre>
            <p style="color: red;"><strong>Click "Publish" after updating rules!</strong></p>
        </div>

        <div class="step">
            <h3>Step 1: Add Sample Data</h3>
            <p>This will add products, categories, and brands to your database</p>
            <button onclick="addSampleData()">Add Sample Data</button>
            <div id="result"></div>
        </div>

        <div class="step">
            <h3>Step 2: Verify Data</h3>
            <p>Check if data was added successfully</p>
            <button onclick="verifyData()">Verify Data</button>
            <div id="verify-result"></div>
        </div>

        <div class="step">
            <h3>Step 3: View in Firebase Console</h3>
            <p>Open Firebase Console to see your data:</p>
            <a href="https://console.firebase.google.com/project/krishisetu-88b88/firestore/data" target="_blank" style="color: #007bff;">
                Open Firestore Data ‚Üí
            </a>
        </div>
    </div>

    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCP7F9rGrvmquvDieiLZ1qahOo2dMXJ-WY",
            authDomain: "krishisetu-88b88.firebaseapp.com",
            projectId: "krishisetu-88b88",
            storageBucket: "krishisetu-88b88.firebasestorage.app",
            messagingSenderId: "1097162834618",
            appId: "1:1097162834618:web:0fbda0a418ef114109b883"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        async function addSampleData() {
            const button = event.target;
            const result = document.getElementById('result');
            
            button.disabled = true;
            button.textContent = 'Adding data...';
            result.innerHTML = '';

            try {
                // Add Categories
                result.innerHTML += '<p>Adding categories...</p>';
                const categories = [
                    { name: 'Chemical Fertilizer', description: 'Chemical-based fertilizers', isActive: true },
                    { name: 'Organic Fertilizer', description: 'Organic and natural fertilizers', isActive: true },
                    { name: 'Bio Fertilizer', description: 'Biological fertilizers', isActive: true }
                ];

                for (const category of categories) {
                    await db.collection('categories').add({
                        ...category,
                        createdAt: new Date()
                    });
                }

                // Add Brands
                result.innerHTML += '<p>Adding brands...</p>';
                const brands = [
                    { name: 'Tata Chemicals', description: 'Leading chemical company', isActive: true },
                    { name: 'IFFCO', description: 'Indian Farmers Fertiliser Cooperative', isActive: true },
                    { name: 'Coromandel', description: 'Coromandel International Limited', isActive: true }
                ];

                for (const brand of brands) {
                    await db.collection('brands').add({
                        ...brand,
                        createdAt: new Date()
                    });
                }

                // Add Products
                result.innerHTML += '<p>Adding products...</p>';
                const products = [
                    {
                        name: 'NPK 20-20-20',
                        category: 'Chemical Fertilizer',
                        brand: 'Tata Chemicals',
                        description: 'Balanced NPK fertilizer for all crops',
                        hsn: '31051000',
                        unit: 'BAG',
                        quantity: 45,
                        reorderPoint: 10,
                        purchasePrice: 850,
                        salePrice: 950,
                        mrp: 1000,
                        gstRate: 5,
                        isActive: true
                    },
                    {
                        name: 'Urea',
                        category: 'Chemical Fertilizer',
                        brand: 'IFFCO',
                        description: 'High quality urea fertilizer',
                        hsn: '31021000',
                        unit: 'BAG',
                        quantity: 8,
                        reorderPoint: 15,
                        purchasePrice: 280,
                        salePrice: 320,
                        mrp: 350,
                        gstRate: 5,
                        isActive: true
                    },
                    {
                        name: 'DAP',
                        category: 'Chemical Fertilizer',
                        brand: 'Coromandel',
                        description: 'Di-Ammonium Phosphate for root development',
                        hsn: '31051000',
                        unit: 'BAG',
                        quantity: 25,
                        reorderPoint: 10,
                        purchasePrice: 1200,
                        salePrice: 1350,
                        mrp: 1400,
                        gstRate: 5,
                        isActive: true
                    }
                ];

                for (const product of products) {
                    await db.collection('products').add({
                        ...product,
                        createdAt: new Date()
                    });
                }

                // Add Suppliers
                result.innerHTML += '<p>Adding suppliers...</p>';
                const suppliers = [
                    {
                        name: 'Tata Chemicals Ltd',
                        contactPerson: 'Rajesh Kumar',
                        email: 'rajesh@tatachemicals.com',
                        phone: '+91-9876543210',
                        address: {
                            street: '123 Industrial Area',
                            city: 'Mumbai',
                            state: 'Maharashtra',
                            pincode: '400001',
                            country: 'India'
                        },
                        gstNumber: '27AAAAA0000A1Z5',
                        isActive: true
                    }
                ];

                for (const supplier of suppliers) {
                    await db.collection('suppliers').add({
                        ...supplier,
                        createdAt: new Date()
                    });
                }

                // Add Customers
                result.innerHTML += '<p>Adding customers...</p>';
                const customers = [
                    {
                        name: 'Ramesh Farmer',
                        email: 'ramesh@example.com',
                        phone: '+91-9876543212',
                        address: {
                            street: 'Village Khetpura',
                            city: 'Jaipur',
                            state: 'Rajasthan',
                            pincode: '302001',
                            country: 'India'
                        },
                        customerType: 'farmer',
                        creditLimit: 50000,
                        isActive: true
                    }
                ];

                for (const customer of customers) {
                    await db.collection('customers').add({
                        ...customer,
                        createdAt: new Date()
                    });
                }

                result.innerHTML = '<p class="success">‚úÖ All sample data added successfully!</p>';
                result.innerHTML += '<p>Added: 3 categories, 3 brands, 3 products, 1 supplier, 1 customer</p>';

            } catch (error) {
                result.innerHTML = `<p class="error">‚ùå Error: ${error.message}</p>`;
                if (error.code === 'permission-denied') {
                    result.innerHTML += '<p class="error">Make sure you updated the security rules as shown above!</p>';
                }
            } finally {
                button.disabled = false;
                button.textContent = 'Add Sample Data';
            }
        }

        async function verifyData() {
            const button = event.target;
            const result = document.getElementById('verify-result');
            
            button.disabled = true;
            button.textContent = 'Checking...';
            result.innerHTML = '';

            try {
                const collections = ['categories', 'brands', 'products', 'suppliers', 'customers'];
                let summary = '<h4>Data Summary:</h4>';

                for (const collectionName of collections) {
                    const snapshot = await db.collection(collectionName).get();
                    summary += `<p>‚úÖ ${collectionName}: ${snapshot.size} documents</p>`;
                }

                result.innerHTML = `<div class="success">${summary}</div>`;
                result.innerHTML += '<p><strong>Next step:</strong> You can now start your React app and login!</p>';

            } catch (error) {
                result.innerHTML = `<p class="error">‚ùå Error: ${error.message}</p>`;
            } finally {
                button.disabled = false;
                button.textContent = 'Verify Data';
            }
        }
    </script>
</body>
</html>
